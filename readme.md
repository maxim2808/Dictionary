# Словарь

Это приложение помогает изучению английского языка. Оно позволяет добавлять новые слова для изучения как напрямую с 
переводом от пользователя, так и получать перевод от сервера. Также имеется возможность проходить тесты, где дается 
случайное слово из словаря пользователя и нужно выбрать правильный перевод. Тест охватывает все слова в словаре
пользователя в случайном порядке. За правильный ответ начисляется прогресс изучения слова, за неправильный - отнимается.

Клиент приложения может работать автономно без подключения к серверу, в такой ситуации будет недоступен функционал по 
добавлению слова с сервера, прочий функционал приложения останется без изменений.

# Зависимости
Для запуска приложения вам понадобятся следующие зависимости:

**Java Development Kit (JDK)**: Убедитесь, что у вас установлена JDK на вашей системе. Spring требует JDK для компиляции и запуска Java-кода. Рекомендуется использовать JDK версии 8 или выше.

**Среда разработки (IDE)** Выберите среду разработки, которая поддерживает Java и Spring, к примеру это может быть IntelliJ IDEA.

**Lombock** В среде разработки должен быть включен Lombok

# Установка 

1.Склонируйте репозиторий на свой локальный компьютер:
git clone https://github.com/maxim2808/Dictionary

2.Откройте проект с помощью среды разработки.

3.Если в среде разработки выключен lombok, то необходимо его включить(*В IntelliJ IDEA: File → Settings → Build, 
Execution, Deployment → Compiler → Annotation Processors → Enable annotation processing*).


# Конфигурация

## Конфигурация сервера

1.Переименуйте файл **application.properties.template** в **application.properties**. 

2.Заполните поля в файле application.properties

```
spring.datasource.username=(Логин от вашей базы данных)
spring.datasource.password=(Пароль от вашей базы данных)
spring.datasource.url=(Адрес вашей базы данных)
spring.datasource.driverClassName=(Драйвер для взаимодействия с базой данных)
spring.jpa.database-platform=(Диалект для взаимодействия с вашей базой данных)
server.port=9090(Тут необходимо указать адрес сервера, изначально клиент настроен на работу с портом 9090.)
```
3.Если вам небходимо отображения SQL запросов в консоли добавьте в application.properties следующую строку:

```
spring.jpa.properties.hibernate.show_sql=true
```

4.Создайте таблицы в базе данных, выполнив следующие команды::
```
create table word (id int generated always as identity primary key, name varchar(200) unique not null, registration_date timestamp);

create table translation (id int generated always as identity primary key, name varchar(200) not null,
word_id int, foreign key(word_id) references word(id), registration_date timestamp);
```

## Конфигурация клиента

Клиент данного приложения работает с использованием встроенной базы данных H2. Если есть необходимость сменить используемую
базу данных, вы можете изменить конфигурацию в файле application.properties. Заполняется она так же, как и на сервере. 

Также в application.properties можно конфигурировать настройки теста слов:

**countWordInTest** - Количество предлагаемых вариантов ответа в тесте, по умолчанию 6
**progressAtATime** - Изменение прогресса за правильный/не правильный ответ.

Также можно изменить адрес сервера к которому обращается клиент, изначально клиент настроен на работу с localhost:9090

**addressOfServer**=(укажите адрес сервера)


# Использование 

## Клиент 

1.Запустите приложение и перейдите по адресу. 
```
http://localhost:8080/words
```
2.На данной странице отображается список слов пользователя. Для каждого слова есть ссылка, при нажатии на неё откроется 
страница со словом, где можно как редактировать его или удалить. При редактировании открывается новая страница, где есть возможность менять слово, а также добавлять и удалять переводы для него,
в разных частях приложения есть возможность вернуться на главную страницу. 

3.В приложении есть 2 способа добавить новое слово:

**Вручную**: Нажать "добавить слово" после этого откроется страница где можно ввести название слово на английском и его основной перевод,
после добавления слово можно открыть его в режиме редактирования и там добавить дополнительные переводы.

**Через сервер**: Сервер предложит переводы по названию слова. Если переводы устраивают пользователя, он может добавить
слово сразу со всеми переводами. В случае проблем с подключением к серверу или если слово не было 
найдено, будет предложен вариант добавить слово вручную.

4.Для начала теста слов необходимо нажать кнопку "начать тест", после этого будет отображено случайное слово из словаря пользователя на английском
и пользователю необходимо будет выбрать правильный перевод на русском. После выбора правильного перевода тест перейдёт
на следующее слово и так пока не пройдётся по всем словам пользователя в случайном порядке. За правильный ответ начисляется прогресс слова, за неправильный отнимается,
изменение прогресса слова за один ответ можно изменить в application.properties

# Сервер
Для просмотра слов и их переводов в sql можно ввести следующую команду:

```
SELECT w.id AS word_id, w.name AS word_name, t.id AS translation_id, t.name AS translation_name
FROM word w
LEFT JOIN translation t ON w.id = t.word_id;
```

Для добавления слов через SQL можно использовать следующую команду:
```
WITH inserted_word AS (
INSERT INTO word (name, registration_date)
VALUES ('слово на английском', CURRENT_TIMESTAMP)
RETURNING id
)
INSERT INTO translation (name, word_id, registration_date)
VALUES
('перевод 1', (SELECT id FROM inserted_word), CURRENT_TIMESTAMP),
('перевод 2', (SELECT id FROM inserted_word), CURRENT_TIMESTAMP);
```
Переводов может быть сколько угодно. Также можно вставлять слова другими командами, но для этого сначала необходимо
добавить новый объект word, а затем добавлять новый translation на основе id объекта word.

Также в случае необходимости можно добавлять новые слова через код приложения в классе DictionaryServerApplication.java в методе
run через:

```wordService.addWord("Слово на английском ", Arrays.asList("Перевод 1", "перевод 2", "перевод 3"));```

Для редактирования английских в SQL можно ввести следующую команду:

```
UPDATE word
SET name = 'Введите новое имя'
WHERE name = 'Введите старое имя';
```
Для редактирования переводов:
```
UPDATE transtalion
SET name = 'Введите новый перевод'
WHERE name = 'Введите старый перевод';
```
Для удаления можно использовать(у слова должны быть удалены все переводы):
```
DELETE FROM word
WHERE name = 'Введите слово';
```
Для удаления перевода:
```
DELETE FROM translation
WHERE name = 'Введите перевод';
```









